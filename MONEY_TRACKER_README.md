# Money Activity Tracker - Відстеження Заробітку

## Опис

Компонент `MoneyActivityCalendar` відстежує ваш щоденний заробіток у форматі GitHub activity heatmap.

### Ключова особливість

**Відображення в сотнях доларів:**
- Ви вводите суму в доларах (наприклад, **600**)
- У квадратику показується кількість **сотень** (буде показано **6**)
- При наведенні tooltip показує повну суму: **$600 (6 hundreds)**

## Приклади

| Введена сума | Відображення в квадратику | Tooltip |
|--------------|---------------------------|---------|
| $600 | 6 | $600 (6 hundreds) |
| $1,200 | 12 | $1,200 (12 hundreds) |
| $3,500 | 35 | $3,500 (35 hundreds) |
| $250 | 2 | $250 (2 hundreds) |
| $50 | 0 | $50 (0 hundreds) |

## Рівні активності (кольори)

Колір квадратика залежить від кількості сотень:
- **Сірий (0)**: $0
- **Світло-зелений (1)**: $100-$500 (1-5 сотень)
- **Середньо-зелений (2)**: $600-$1,500 (6-15 сотень)
- **Темно-зелений (3)**: $1,600-$3,000 (16-30 сотень)
- **Найтемніший зелений (4)**: $3,100+ (31+ сотень)

## Як використовувати

1. **Введіть суму в доларах:**
   ```
   Введіть: 600
   Результат: У квадратику буде цифра "6"
   ```

2. **Подивіться деталі:**
   - Наведіть мишку на квадратик
   - Побачите: "$600 (6 hundreds) on Nov 22, 2025"

3. **Загальна статистика:**
   - Зверху відображається: "$12,300 earned in the last year"
   - Це сума всіх заробітків за останній рік

## Технічні деталі

### Frontend
- Конвертація: `Math.floor(dollars / 100)` = сотні
- Валідація: від $0 до $100,000
- Крок вводу: 100 (рекомендовано)

### Backend
- Поле `word_count` тепер зберігає **суми в доларах**
- Валідація: 0-100,000
- База даних залишається без змін (просто інше використання поля)

### База даних

Якщо ви вже створили таблицю зі старим обмеженням (0-1000), виконайте:

```sql
ALTER TABLE daily_activity
DROP CONSTRAINT IF EXISTS daily_activity_word_count_check;

ALTER TABLE daily_activity
ADD CONSTRAINT daily_activity_word_count_check
CHECK (word_count >= 0 AND word_count <= 100000);
```

Див. файл `DATABASE_UPDATE.sql` для деталей.

## Що змінилося

### ✅ Оновлено:
1. Frontend компонент (`money-activity-calendar.tsx`)
   - Додано конвертацію доларів у сотні
   - Відображення числа в квадратику
   - Оновлено UI тексти (earnings замість words)
   - Змінено валідацію (до $100,000)

2. Стилі (`money-activity-calendar.module.scss`)
   - Додано `.dayNumber` для відображення числа в квадратику
   - Налаштовано розмір шрифту (7px) і жирність

3. Backend
   - Оновлено валідацію (0-100,000)
   - Додано коментарі про зберігання доларів
   - Оновлено повідомлення про помилки

4. База даних
   - Створено SQL для оновлення обмежень

### ❌ Не змінилося:
- Назва поля `word_count` в БД (для зворотної сумісності)
- Структура таблиці
- API endpoints
- Базова логіка роботи

## Швидкий старт

1. Оновіть обмеження в Supabase (якщо потрібно):
   ```sql
   -- Скопіюйте з DATABASE_UPDATE.sql
   ```

2. Перезапустіть backend:
   ```bash
   cd backend
   npm run dev
   ```

3. Використовуйте компонент:
   ```tsx
   import { MoneyActivityCalendar } from '@/widgets/money-activity-calendar';

   <MoneyActivityCalendar />
   ```

4. Введіть суму та насолоджуйтесь!

## Підказки

- **Рекомендуємо** вводити суми кратні 100 для чистоти відображення
- Tooltip завжди показує точну суму + кількість сотень
- Число в квадратику з'являється тільки якщо сума ≥ $100

## Питання?

Якщо щось незрозуміло, перевірте:
1. Tooltip при наведенні (показує повну інформацію)
2. Console в DevTools (логи помилок)
3. Network tab (чи приходять дані з API)
